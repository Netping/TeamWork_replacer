import argparse
import requests

parser = argparse.ArgumentParser(description=f'Teamwork replacer tester.')

parser.add_argument('--host', type=str, required=True,
                    help='Address Teamwork replacer bind to')
parser.add_argument('--port', type=int, required=True,
                    help='Port Teamwork replacer bind to')
config = parser.parse_args()

data = {'eventCreator': {'id': 306580, 'firstName': 'Alexey', 'lastName': 'Nikolin', 'avatar': 'https://s3.amazonaws.com/TWFiles/108063/userAvatar/tf_C0E99BBB-DB48-814C-D12B916949DD8F4F.t-nDWOGUC6g.jpg'}, 'comment': {'id': 12294370, 'contentType': 'HTML', 'body': '<div>\n <div>\n  <a href="https://netping.atlassian.net/wiki/spaces/PROJ/pages/1852866561/IPRJ+24474707+TeamWork" target="_blank" rel="noopener" data-mce-href="https://netping.atlassian.net/wiki/spaces/PROJ/pages/1852866561/IPRJ+24474707+TeamWork">https://netping.atlassian.net/wiki/spaces/PROJ/pages/1852866561/IPRJ+24474707+TeamWork</a> \n  <br>\n </div>\n <div>\n  <a href="https://netping.teamwork.com/#/tasks/27810426" target="_blank" rel="noopener" data-mce-href="https://netping.teamwork.com/#/tasks/27810426">https://netping.teamwork.com/#/tasks/27810426</a> \n  <br>\n </div>\n <div>\n  <a href="https://netping.teamwork.com/#/people/306580/time" target="_blank" rel="noopener" data-mce-href="https://netping.teamwork.com/#/people/306580/time">https://netping.teamwork.com/#/people/306580/time</a> \n  <br>\n </div>\n <div>\n  <a href="https://netping.teamwork.com/#/projects/538299/tasks" target="_blank" rel="noopener" data-mce-href="https://netping.teamwork.com/#/projects/538299/tasks">https://netping.teamwork.com/#/projects/538299/tasks</a> \n  <br>\n </div>\n <div>\n  <a href="https://netping.teamwork.com/#/tasks/27844997" target="_blank" rel="noopener" data-mce-href="https://netping.teamwork.com/#/tasks/27844997">https://netping.teamwork.com/#/tasks/27844997</a>\n  <br>\n </div>\n</div>', 'userId': 306580, 'objectId': 27810426, 'objectType': 'task', 'projectId': 536953, 'dateCreated': '2020-11-23T12:33:49Z', 'dateUpdated': '2020-11-23T12:33:49Z'}}
r = requests.post(f'http://{config.host}:{config.port}/webhook', json=data)
print(r)

data = {'eventCreator': {'id': 306580, 'firstName': 'Alexey', 'lastName': 'Nikolin', 'avatar': 'https://s3.amazonaws.com/TWFiles/108063/userAvatar/tf_C0E99BBB-DB48-814C-D12B916949DD8F4F.t-nDWOGUC6g.jpg'}, 'wrong_type': {'id': 12294370, 'contentType': 'HTML', 'body': '<div>\n <div>\n  <a href="https://netping.atlassian.net/wiki/spaces/PROJ/pages/1852866561/IPRJ+24474707+TeamWork" target="_blank" rel="noopener" data-mce-href="https://netping.atlassian.net/wiki/spaces/PROJ/pages/1852866561/IPRJ+24474707+TeamWork">https://netping.atlassian.net/wiki/spaces/PROJ/pages/1852866561/IPRJ+24474707+TeamWork</a> \n  <br>\n </div>\n <div>\n  <a href="https://netping.teamwork.com/#/tasks/27810426" target="_blank" rel="noopener" data-mce-href="https://netping.teamwork.com/#/tasks/27810426">https://netping.teamwork.com/#/tasks/27810426</a> \n  <br>\n </div>\n <div>\n  <a href="https://netping.teamwork.com/#/people/306580/time" target="_blank" rel="noopener" data-mce-href="https://netping.teamwork.com/#/people/306580/time">https://netping.teamwork.com/#/people/306580/time</a> \n  <br>\n </div>\n <div>\n  <a href="https://netping.teamwork.com/#/projects/538299/tasks" target="_blank" rel="noopener" data-mce-href="https://netping.teamwork.com/#/projects/538299/tasks">https://netping.teamwork.com/#/projects/538299/tasks</a> \n  <br>\n </div>\n <div>\n  <a href="https://netping.teamwork.com/#/tasks/27844997" target="_blank" rel="noopener" data-mce-href="https://netping.teamwork.com/#/tasks/27844997">https://netping.teamwork.com/#/tasks/27844997</a>\n  <br>\n </div>\n</div>', 'userId': 306580, 'objectId': 27810426, 'objectType': 'task', 'projectId': 536953, 'dateCreated': '2020-11-23T12:33:49Z', 'dateUpdated': '2020-11-23T12:33:49Z'}}
r = requests.post(f'http://{config.host}:{config.port}/webhook', json=data)
print(r)
